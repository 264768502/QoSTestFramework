<!DOCTYPE html>
<html lang="en">
<head>
    <title> WebRTCMCUBench</title>
    <link rel="stylesheet" href="css/style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
</head>
<script language="javascript">

</script>

<body>
<h2 style = "text-align:center;"> WebRTCMCUBench: A WebRTC MCU Benchmark </h2>
<div id = "heading"><h2> Join a WebRTC MCU Connection </h2> </div>

<div id = "welcome" > </div>

<div id = "how-to-use">
    <p> After all members having connected to mcu room, click button "Record Video Analysis Data" to start record and upload data. About one minute later, click button "Download Video Analysis Data" button to finish record and upload remained data to server. At last, click buttons "Quality", "Latency" and "Jitter" and the corresponding graphs should be presented.
</div>

<div title="local medias" >
    <!--<div id="myVideo" style="width: 1280px; height: 720px; display: inline-block;" title="my camera" ></div>-->
    <div id = "myVideo" style="width: 1280px; height: 720px; display: none;" title="my camera" ></div>
    <div id = "mixed-streams" title="mix media"   class="dynamicContainer"></div>
</div>

  <div style="width: 1280px; height: 720px;" class="local">
      <video playsinline muted autoplay></video>
    </div>
    <div id="resolutions"><span>Try a different resolution:&nbsp;</span></div>
    <div class="remote">
      <video playsinline muted autoplay></video>
    </div>

<div style="clear: both">
    <button id="start test" onclick = "startVideoQualityMeasureTesting();"style="width: 640px;height: 50px;">start Video Quality Measure Testing</button>
    <button id="stop test" onclick = "stopVideoQualityMeasureTesting();"style="width: 640px;height: 50px;">stop Video Quality Measure Testing</button>
</div>

<div>
    <canvas id="blank space" style="width: 640px;height: 50px;" style="display: none;"></canvas>
</div>


<div>
      <button id="getResultFolder" onclick = "getResultFolder()" style="width: 200px;height: 30px;">getResultFolder</button>
       <div>
          ResultFolder:<select id="resultfolder"></select>
       </div>
</div>
<div>

<div>
    <button id="quality-btn" onclick = "getQuality()" style="width: 250px;height: 50px;">Image Quality (PSNR & SSIM & VIF)</button>
    Frame:<input type = "text" id = "qnum" value = "300">
    <!--Threshold:<input type = "text" id = "iqthreshold" value = "1000">-->

    <canvas id="chartQuality" width="400" height="100" style="display: none;"></canvas>
    <canvas id="chartQuality2" width="400" height="100" style="display: none;"></canvas>
    <!-- <canvas id="chartQuality3" width="400" height="100" style="display: none;"></canvas> -->
</div>

<div>
    <button id="vmaf-btn" onclick = "getVmaf()" style="width: 250px;height: 50px;">Image Quality (vmaf)</button>
    <!--Threshold:<input type = "text" id = "iqthreshold" value = "1000">-->

    <canvas id="chartVmaf" width="400" height="100" style="display: none;"></canvas>
</div>

<div>
    <button id="NR-btn" onclick = "getNR()" style="width: 250px;height: 50px;">No-Reference (Blockiness, Blockloss, Blur, Noise,Freezing)</button>
    Blockiness Normal Range:<a>0.9-1.01</a>
    <!--Threshold:<input type = "text" id = "iqthreshold" value = "1000">-->

    <canvas id="chartNR1" width="400" height="100" style="display: none;"></canvas>
    Blockloss Normal Range:<a>0-5</a>
    <canvas id="chartNR2" width="400" height="100" style="display: none;"></canvas>
    Blur Normal Range:<a>0-5</a>
    <canvas id="chartNR3" width="400" height="100" style="display: none;"></canvas>
    Noise Normal Range:<a>0-3.5</a>
    <canvas id="chartNR4" width="400" height="100" style="display: none;"></canvas>
    Interlacing Normal Range:<a>0</a>
    <canvas id="chartNR5" width="400" height="100" style="display: none;"></canvas>
    Freezing Normal Range:<a>0</a>
    <canvas id="chartNR6" width="400" height="100" style="display: none;"></canvas>
</div>

<div>
    <button id="jitter-btn" onclick = "getJitter()" style="width: 250px;height: 50px;">Jitter (miliseconds)</button>
  Frame:<input type = "text" id = "jnum" value = "300">
  Threshold:<input type = "text" id = "jthreshold" value = "3000">
  Average:<input type = "text" id = "jitter_avg" value = "0">
    <canvas id="chartJitter" width="400" height="100" style="display: none;"></canvas>
</div>

<div>
    <button id="latency-btn" onclick = "getLatency()" style="width: 250px;height: 50px;">Latency (miliseconds)</button>
  Frame:<input type = "text" id = "lnum" value = "300">
  Threshold:<input type = "text" id = "lthreshold" value = "1000">
  Average:<input type = "text" id = "latency_avg" value = "0">
    <canvas id="chartLatency" width="400" height="100" style="display: none;"></canvas>
</div>

<div>
    <button id="fps-btn" onclick = "getFps()" style="width: 250px;height: 50px;">Fps</button>
  Frame:<input type = "text" id = "fnum" value = "300">
  Threshold:<input type = "text" id = "fthreshold" value = "80">
  Average:<input type = "text" id = "fps_avg" value = "0">
    <canvas id="chartgoogFps" width="400" height="100" style="display: none;"></canvas>
</div>

<div>
    <button id="bitrate-btn" onclick = "getBitrate()" style="width: 250px;height: 50px;">Bitrate (kbps)</button>
  Frame:<input type = "text" id = "bnum" value = "300">
  Threshold:<input type = "text" id = "bthreshold" value = "2500">
  Average:<input type = "text" id = "bitrate_avg" value = "0">
    <canvas id="chartgoogBitrate" width="400" height="100" style="display: none;"></canvas>
</div>




<!-- Note : This canvas is to store video data, do not touch! -->
<canvas id="data-canvas" width="1280" height="720" hidden></canvas>
<script src="public/jquery-3.2.1.min.js"></script>
<script src="public/socket.io.js" type="text/javascript"></script>
<script src="public/adapter.js" type="text/javascript"></script>
<script src="public/ics.js" type="text/javascript"></script>
<script src="public/index.js" type="text/javascript"></script>
<script type="text/javascript" src="js/Chart-2.0.js"> </script>
<script type="text/javascript" src="js/stat.js"> </script>
<script type="text/javascript" src="js/stat_c.js"> </script>
<script language="JavaScript">
      function getParameterByName(name) {
        name = name.replace(/[\[]/, '\\\[').replace(/[\]]/, '\\\]');
        var regex = new RegExp('[\\?&]' + name + '=([^&#]*)'),
          results = regex.exec(location.search);
        return results === null ? '' : decodeURIComponent(results[1].replace(
          /\+/g, ' '));
      }
      runSocketIOSample();
</script>

</body>
</html>
